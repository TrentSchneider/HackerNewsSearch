(this["webpackJsonphacker-news-search"]=this["webpackJsonphacker-news-search"]||[]).push([[0],{34:function(e,t,c){},37:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){"use strict";c.r(t);var s=c(1),r=c.n(s),n=c(27),a=c.n(n),i=(c(33),c(34),c(10)),l=c(0);var h=function(e){return 0===e.searchResult.length?Object(l.jsx)("div",{children:Object(l.jsx)("h3",{children:"No Results"})}):(console.log("results",e.searchResult),Object(l.jsx)("div",{children:e.searchResult.map((function(e,t){return null===e.url?Object(l.jsxs)("div",{className:"card my-1 p-2",children:[Object(l.jsx)("h3",{className:"card-title",children:e.title}),Object(l.jsxs)("p",{className:"card-subtitle",children:["Author: ",e.author]})]},t):Object(l.jsxs)("div",{className:"card my-1 p-2",children:[Object(l.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:Object(l.jsx)("h3",{className:"card-title",children:e.title})}),Object(l.jsxs)("p",{className:"card-subtitle",children:["Author: ",e.author]})]},t)}))}))};var o=function(e){return Object(s.useEffect)((function(){e.API.recent().then((function(t){e.setSearchResult(t.data.hits)})).catch((function(e){return console.log("err",e)}))}),[]),Object(l.jsxs)("div",{className:"mx-1",children:[Object(l.jsxs)("form",{children:[Object(l.jsx)("label",{htmlFor:"searchInput",children:Object(l.jsx)("h1",{children:"Story Search"})}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("button",{type:"submit",className:"btn btn-secondary",onClick:e.handleSearchClick,children:"Search"}),Object(l.jsx)("input",{type:"text",className:"form-control",id:"searchInput","aria-describedby":"SearchInputHelp",placeholder:"Enter Text",onChange:function(t){return e.setSearchText(t.target.value)}})]})]}),Object(l.jsxs)("div",{className:"card p-1 mt-4",children:[Object(l.jsx)("h2",{children:"Results:"}),Object(l.jsx)(h,{searchResult:e.searchResult})]})]})},j=c(9),d=c.n(j);var u=function(e){if(void 0===e.history||null===e.history||0===e.history.length)return Object(l.jsx)("div",{children:Object(l.jsx)("h3",{children:"No History"})});if("ascending"===e.sort){var t=e.history.sort((function(e,t){return e.timestamp-t.timestamp}));return console.log("hist asce=",t),Object(l.jsx)("div",{children:t.map((function(e,t){return Object(l.jsxs)("div",{className:"card my-1 p-2",children:[Object(l.jsxs)("h3",{className:"card-title",children:["Search: ",e.search]}),Object(l.jsxs)("p",{className:"card-subtitle",children:["Date: ",d()(e.timestamp).format("M-D-YYYY h:mm:ssa")]})]},t)}))})}if("descending"===e.sort){var c=e.history.sort((function(e,t){return t.timestamp-e.timestamp}));return console.log("hist desc",c),Object(l.jsx)("div",{children:c.map((function(e,t){return Object(l.jsxs)("div",{className:"card my-1 p-2",children:[Object(l.jsxs)("h3",{className:"card-title",children:["Search: ",e.search]}),Object(l.jsxs)("p",{className:"card-subtitle",children:["Date: ",d()(e.timestamp).format("M-D-YYYY h:mm:ssa")]})]},t)}))})}};var b=function(e){var t=Object(s.useState)("ascending"),c=Object(i.a)(t,2),r=c[0],n=c[1];return Object(l.jsxs)("div",{className:"mx-1",children:[Object(l.jsx)("h1",{children:"History"}),Object(l.jsx)("h2",{children:"Sort by date:"}),Object(l.jsx)("button",{className:"btn btn-secondary mx-1",onClick:function(){return n("ascending")},children:"Ascending"}),Object(l.jsx)("button",{className:"btn btn-secondary mx-1",onClick:function(){return n("descending")},children:"Descending"}),Object(l.jsx)("button",{className:"btn btn-secondary mx-1",onClick:e.clearStorage,children:"Clear History"}),Object(l.jsxs)("div",{className:"card p-1 mt-4",children:[Object(l.jsx)("h2",{children:"Results:"}),Object(l.jsx)(u,{history:e.history,sort:r})]})]})},m=c(12);c(37);var x=function(){return Object(l.jsxs)("div",{className:"headerBackground mb-2 row",children:[Object(l.jsxs)("div",{className:"col-4",children:[Object(l.jsx)(m.b,{to:"/",className:"btn btn-success m-1 my-2",children:"Home"}),Object(l.jsx)(m.b,{to:"/history",className:"btn btn-success m-1 my-2",children:"History"})]}),Object(l.jsx)("h1",{className:"col-4 text-center",children:"Hacker News"})]})},O=c(2),f=c(17),p=c.n(f),g={search:function(e){var t="https://hn.algolia.com/api/v1/search?query="+e+"&tags=story";return p.a.get(t)},recent:function(){return p.a.get("https://hn.algolia.com/api/v1/search_by_date?tags=story")}};c(61);var y=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),c=t[0],r=t[1],n=Object(s.useState)([]),a=Object(i.a)(n,2),h=a[0],j=a[1],u=Object(s.useState)(""),f=Object(i.a)(u,2),p=f[0],y=f[1];return Object(s.useEffect)((function(){j(JSON.parse(localStorage.getItem("history")))}),[]),Object(s.useEffect)((function(){localStorage.setItem("history",JSON.stringify(h)),console.log("set local",h)}),[h]),Object(l.jsx)("div",{children:Object(l.jsxs)(m.a,{basename:"/HackerNewsSearch",children:[Object(l.jsx)(x,{}),Object(l.jsxs)(O.c,{children:[Object(l.jsx)(O.a,{exact:!0,path:["/"],children:Object(l.jsx)(o,{API:g,handleSearchClick:function(e){e.preventDefault(),j(null===h?[{search:p,timestamp:d()().unix()}]:h.concat({search:p,timestamp:d()().unix()})),""!==p&&g.search(p).then((function(e){r(e.data.hits)})).catch((function(e){return console.log("err",e)}))},setSearchText:y,searchResult:c,setSearchResult:r})}),Object(l.jsx)(O.a,{exact:!0,path:["/history"],children:Object(l.jsx)(b,{history:h,clearStorage:function(){localStorage.clear(),j([])}})})]})]})})},v=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,63)).then((function(t){var c=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,a=t.getTTFB;c(e),s(e),r(e),n(e),a(e)}))};a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),v()}},[[62,1,2]]]);
//# sourceMappingURL=main.59f82987.chunk.js.map